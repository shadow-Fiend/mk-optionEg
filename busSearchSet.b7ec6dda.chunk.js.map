{"version":3,"sources":["webpack:///./apps/portal/search/bussinessSearch/busSearchSet/component.js","webpack:///./apps/portal/search/bussinessSearch/busSearchSet/action.js","webpack:///./apps/portal/search/bussinessSearch/busSearchSet/reducer.js"],"names":["C","props","monkeyKing","path","creator","CB","action","option","onInit","component","injections","setOkListener","onOk","handleEditCb","reduce","rowInfo","handleChange","type","e","metaAction","value","target","split","handleClear","gf","get","length","toast","webapi","search","clearExtKeys","businessCode","response","result","toJS","keyValue","keys","keyValue1","map","o","i","push","config","current","ret","metaHandlers","reducer","init","state","initState","data","clearValue","extKeys","metaReducer","changeKeyValue","sf","set"],"mappings":"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","file":"busSearchSet.b7ec6dda.chunk.js","sourcesContent":["import React, { Component } from 'react'\nimport { wrapper } from 'mk-meta-engine'\nimport appInfo from './index'\n\n@wrapper(appInfo)\nexport default class C extends Component {\n\trender() {\n\t\treturn this.props.monkeyKing({ ...this.props, path: 'root' })\n\t}\n}\n\n\n// WEBPACK FOOTER //\n// ./apps/portal/search/bussinessSearch/busSearchSet/component.js","import React from 'react'\nimport { action as MetaAction, AppLoader } from 'mk-meta-engine'\nimport config from './config'\nimport { fromJS } from \"immutable\"\n\nlet CB\n\nclass action {\n    constructor(option) {\n        this.metaAction = option.metaAction\n        this.config = config.current\n        this.webapi = this.config.webapi\n    }\n\n    onInit = ({ component, injections }) => {\n        this.component = component\n        this.injections = injections\n        \n        if(this.component.props.setOkListener) {\n            this.component.props.setOkListener(this.onOk)\n        } \n        CB = this.component.props.handleEditCb\n        injections.reduce('init', this.component.props.rowInfo)\n    }\n\n    handleChange = (type) => (e) => {\n        let {metaAction} = this\n        if(type == 'keyValue') {\n            let value\n            if(e && e.target && e.target.value) {\n                value = e.target.value\n            }\n            this.injections.reduce('changeKeyValue', value.split(' '))\n        }\n    }\n    \n    handleClear = async () => {\n        let rowInfo = this.metaAction.gf('data.rowInfo')\n        if(!rowInfo.get('extKeys') || !rowInfo.get('extKeys').length) {\n            this.metaAction.toast('error', '此业务没有关键字')\n            return \n        }\n        \n        const response = await this.webapi.search.clearExtKeys({businessCode: rowInfo.get('businessCode')})\n        \n        if(response) {\n            this.metaAction.toast('success', '清除推荐关键字成功!')\n            this.injections.reduce('clearValue')\n            CB({result: true })\n        }\n    }\n    \n    onOk = () => {\n        let rowInfo = this.metaAction.gf('data.rowInfo').toJS(),\n            keyValue = rowInfo.keys, keyValue1 = []\n        keyValue.map((o,i) => {\n            if(!!o) {\n                keyValue1.push(o)\n            }\n        })\n        \n        rowInfo.keys = keyValue1\n        \n        return {result:true, value: fromJS(rowInfo)}\n    }\n}\n\nexport default function creator(option) {\n    const metaAction = new MetaAction(option),\n        o = new action({ ...option, metaAction }),\n        ret = { ...metaAction, ...o }\n\n    metaAction.config({ metaHandlers: ret })\n\n    return ret\n}\n\n\n// WEBPACK FOOTER //\n// ./apps/portal/search/bussinessSearch/busSearchSet/action.js","import { Map } from 'immutable'\nimport { reducer as MetaReducer } from 'mk-meta-engine'\nimport config from './config'\nimport { getInitState } from './data'\n\nclass reducer {\n    constructor(option) {\n        this.metaReducer = option.metaReducer\n        this.config = config.current\n    }\n\n    init = (state, rowInfo) => {\n        const initState = getInitState()\n        if(rowInfo) {\n            initState.data.keyValue = rowInfo.keys\n            initState.data.clearValue = rowInfo.extKeys\n            initState.data.rowInfo = rowInfo\n        }\n        return this.metaReducer.init(state, initState)\n    }\n    \n    changeKeyValue = (state, value) => {\n        state = this.metaReducer.sf(state, 'data.keyValue', value)\n        let rowInfo = this.metaReducer.gf(state, 'data.rowInfo')\n        rowInfo = rowInfo.set('keys', value)\n        state = this.metaReducer.sf(state, 'data.rowInfo', rowInfo)\n        return state\n    }\n    \n    clearValue = (state) => {\n        state = this.metaReducer.sf(state, 'data.clearValue', '')\n        let rowInfo = this.metaReducer.gf(state, 'data.rowInfo')\n        rowInfo = rowInfo.set('extKeys', [])\n        state = this.metaReducer.sf(state, 'data.rowInfo', rowInfo)\n        return state\n    }\n}\n\nexport default function creator(option) {\n    const metaReducer = new MetaReducer(option),\n        o = new reducer({ ...option, metaReducer })\n\n    return { ...metaReducer, ...o }\n}\n\n\n// WEBPACK FOOTER //\n// ./apps/portal/search/bussinessSearch/busSearchSet/reducer.js"],"sourceRoot":""}