{"version":3,"sources":["webpack:///./apps/root/component.js","webpack:///./apps/root/action.js","webpack:///./apps/root/reducer.js"],"names":["C","props","monkeyKing","path","creator","action","option","onInit","component","injections","initState","defaultAppName","data","currentAppName","reduce","listen","onRedirect","appName","getChildApp","childApp","location","metaAction","gf","targetAppName","pushChildApp","componentWillUnmount","unlisten","config","current","o","ret","metaHandlers","reducer","metaReducer","init","state","redirect","sf"],"mappings":"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","file":"mk-app-root.9c0d6cd6.chunk.js","sourcesContent":["import React, { Component } from 'react'\r\n\r\nimport { wrapper } from 'mk-meta-engine'\r\n\r\nimport appInfo from './index'\r\n\r\n@wrapper(appInfo)\r\nexport default class C extends Component {\r\n\trender() {\r\n\t\treturn this.props.monkeyKing({ ...this.props, path: 'root' })\r\n\t}\r\n}\n\n\n// WEBPACK FOOTER //\n// ./apps/root/component.js","import React from 'react'\r\nimport { action as MetaAction, AppLoader } from 'mk-meta-engine'\r\nimport config from './config'\r\nimport { history } from 'mk-utils'\r\nimport { getInitState } from './data'\r\n\r\nclass action {\r\n    constructor(option) {\r\n        this.metaAction = option.metaAction\r\n        this.config = config.current\r\n    }\r\n\r\n    onInit = ({ component, injections }) => {\r\n        this.component = component\r\n        this.injections = injections\r\n        const initState = getInitState(),\r\n            defaultAppName = initState.data.currentAppName\r\n\r\n        injections.reduce('init', { initState })\r\n\r\n        history.listen('mk-app-root', this.listen)\r\n        this.onRedirect({appName: history.getChildApp('mk-app-root') || defaultAppName })\r\n    }\r\n\r\n    listen = (childApp, location, action) => {\r\n        const defaultAppName = getInitState().data.currentAppName\r\n        const currentAppName = this.metaAction.gf('data.currentAppName') || defaultAppName\r\n        const targetAppName = childApp || defaultAppName\r\n        if (targetAppName == currentAppName) {\r\n            return\r\n        }\r\n        this.injections.reduce('redirect', targetAppName)\r\n    }\r\n\r\n    onRedirect = ({ appName }) => {\r\n        history.pushChildApp('mk-app-root', appName)\r\n    }\r\n\r\n    componentWillUnmount = () => {\r\n        history.unlisten('mk-app-root', this.listen)\r\n    }\r\n}\r\n\r\nexport default function creator(option) {\r\n    const metaAction = new MetaAction(option),\r\n        o = new action({ ...option, metaAction }),\r\n        ret = { ...metaAction, ...o }\r\n\r\n    metaAction.config({ metaHandlers: ret })\r\n\r\n    return ret\r\n}\n\n\n// WEBPACK FOOTER //\n// ./apps/root/action.js","import { Map } from 'immutable'\r\nimport { reducer as MetaReducer } from 'mk-meta-engine'\r\nimport config from './config'\r\nimport { getInitState } from './data'\r\nimport { history } from 'mk-utils'\r\n\r\nclass reducer {\r\n    constructor(option) {\r\n        this.metaReducer = option.metaReducer\r\n        this.config = config.current\r\n    }\r\n\r\n    init = (state, option) => {\r\n        return this.metaReducer.init(state, option.initState)\r\n    }\r\n\r\n    redirect = (state, appName) => {\r\n        return this.metaReducer.sf(state, 'data.currentAppName', appName)\r\n    }\r\n}\r\n\r\nexport default function creator(option) {\r\n    const metaReducer = new MetaReducer(option),\r\n        o = new reducer({ ...option, metaReducer })\r\n\r\n    return { ...metaReducer, ...o }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./apps/root/reducer.js"],"sourceRoot":""}