{"version":3,"sources":["webpack:///./apps/portal/search/component.js","webpack:///./apps/portal/search/action.js","webpack:///./apps/portal/search/reducer.js"],"names":["C","props","monkeyKing","path","creator","action","option","onInit","component","injections","reduce","pagination","metaAction","gf","toJS","load","webapi","product","query","response","handleChange","key","e","target","value","handleSearch","toast","pageChanged","current","pageSize","getLayout","products","size","map","o","index","getSingleLayout","get","id","i","x","y","Math","floor","w","h","config","ret","metaHandlers","reducer","init","state","initState","metaReducer","sf","changeSearch"],"mappings":"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","file":"search.2b9b80f0.chunk.js","sourcesContent":["import React, { Component } from 'react'\nimport { wrapper } from 'mk-meta-engine'\nimport appInfo from './index'\n\n@wrapper(appInfo)\nexport default class C extends Component {\n\trender() {\n\t\treturn this.props.monkeyKing({ ...this.props, path: 'root' })\n\t}\n}\n\n\n// WEBPACK FOOTER //\n// ./apps/portal/search/component.js","import React from 'react'\nimport { action as MetaAction, AppLoader } from 'mk-meta-engine'\nimport config from './config'\n\nclass action {\n    constructor(option) {\n        this.metaAction = option.metaAction\n        this.config = config.current\n        this.webapi = this.config.webapi\n    }\n\n    onInit = ({ component, injections }) => {\n        this.component = component\n        this.injections = injections\n        injections.reduce('init')\n        const pagination = this.metaAction.gf('data.pagination').toJS()\n//        this.load(pagination)\n    }\n\n    load = async (pagination) =>{\n        const response = await this.webapi.product.query({ pagination})\n        this.injections.reduce('load', response)\n    }\n    \n    handleChange = (key) => (e) => {\n        if(key == 'searchKey') {\n            this.injections.reduce('changeSearch', key, e.target.value)\n        }\n    }\n    \n    handleSearch = (key) => (e) => {\n        if(!e) {\n            this.metaAction.toast('error', '请输入内容进行操作')\n            return \n        } \n        \n        if(key == 'searchKey') {\n            if(e == '人人' || e == 'renren') {\n                let pagination = this.metaAction.gf('data.pagination').toJS()\n                this.load(pagination)\n            }else {\n                this.metaAction.toast('error', '该功能正在开发，敬请期待')\n                return\n            }\n        }\n    }\n\n    pageChanged = (current, pageSize) => {\n        this.load({ current, pageSize })\n    }\n\n    getLayout = () => {\n        const products = this.metaAction.gf('data.products')\n        if(!products || products.size == 0) return\n                \n        return products.map((o, index)=>this.getSingleLayout(index, o.get('id'))).toJS()\n    }\n\n    getSingleLayout = (index, id) =>{\n        return {\n            i: id + '',\n            x: (index % 4) * 3,\n            y: Math.floor(index / 4) * 4,\n            w: 3,\n            h: 4\n        }\n    }\n\n\n}\n\nexport default function creator(option) {\n    const metaAction = new MetaAction(option),\n        o = new action({ ...option, metaAction }),\n        ret = { ...metaAction, ...o }\n\n    metaAction.config({ metaHandlers: ret })\n\n    return ret\n}\n\n\n// WEBPACK FOOTER //\n// ./apps/portal/search/action.js","import { Map, fromJS } from 'immutable'\nimport { reducer as MetaReducer } from 'mk-meta-engine'\nimport config from './config'\nimport { getInitState } from './data'\n\nclass reducer {\n    constructor(option) {\n        this.metaReducer = option.metaReducer\n        this.config = config.current\n    }\n\n    init = (state, option) => {\n        const initState = getInitState()\n        return this.metaReducer.init(state, initState)\n    }\n\n    load = (state, {products, pagination}) => {\n        state = this.metaReducer.sf(state, 'data.pagination', fromJS(pagination))\n        return this.metaReducer.sf(state, 'data.products', fromJS(products))\n    }\n    \n    changeSearch = (state, key, value) => {\n        state = this.metaReducer.sf(state, 'data.' + key, value)\n        return state\n    }\n\n}\n\nexport default function creator(option) {\n    const metaReducer = new MetaReducer(option),\n        o = new reducer({ ...option, metaReducer })\n\n    return { ...metaReducer, ...o }\n}\n\n\n// WEBPACK FOOTER //\n// ./apps/portal/search/reducer.js"],"sourceRoot":""}